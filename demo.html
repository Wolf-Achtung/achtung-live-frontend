<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Demo â€“ Achtung.live</title>
  <link rel="stylesheet" href="style.css">
  <style>
    .modal-content {
      animation: fadeIn 0.5s ease-in-out;
      background-color: #fefefe;
    }
    @keyframes fadeIn {
      from {opacity: 0;}
      to {opacity: 1;}
    }
    .analysis-result {
      margin: 40px auto;
      padding: 20px;
      max-width: 600px;
      background: #f2f7ff;
      border: 1px solid #002855;
      border-radius: 8px;
      text-align: center;
      color: #002855;
      font-size: 1.1em;
    }
  </style>
</head>

<body>

<header>
  <h1>[achtung.live]</h1>
  <p>Die Autokorrektur fÃ¼r deine PrivatsphÃ¤re</p>
</header>

<main>
  <h2>Teste achtung.live live!</h2>

  <form id="demoForm">
    <textarea id="demoText" placeholder="Schreibe hier deinen Text..." rows="5" required></textarea>

    <p style="font-size: 14px;">
      <input type="checkbox" id="privacyPolicyDemo" required>
      <label for="privacyPolicyDemo">
        Ich akzeptiere die <a href="#" onclick="openModal('datenschutzModal'); return false;">DatenschutzerklÃ¤rung</a>.
      </label>
    </p>

    <button type="submit">Text analysieren</button>
  </form>

  <div id="analysisResult" class="analysis-result" style="display: none;"></div>
</main>

<!-- Datenschutz-Popup -->
<div id="datenschutzModal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="closeModal('datenschutzModal')">&times;</span>
    <iframe src="datenschutz-popup2.html" style="width: 100%; height: 400px; border: none;"></iframe>
  </div>
</div>

<footer class="site-footer">
  <div class="europe">ðŸ‡ªðŸ‡º Aus Europa. FÃ¼r Alle.</div>
  
  <div class="schutztext">
    [<span style="color: #a60000;">achtung.live</span>] schÃ¼tzt, was zÃ¤hlt: deine Daten, deine PrivatsphÃ¤re, deine Freiheit.
  </div>
  
  <div class="claims">
    DSGVO- & EU AI-Act-konform. Menschlich. Selbstbestimmt. Transparent.
  </div>

   <nav class="footer-nav">
    <a href="info.html">Info</a> â€¢
    <a href="gefahr.html">Gefahr</a> â€¢
    <a href="demo.html">Demo</a> â€¢
    <a href="ki-hinweis.html">KI-Hinweis</a> â€¢
    <a href="datenschutz.html">Datenschutz</a> â€¢
    <a href="kontakt.html">Kontakt</a> â€¢
    <a href="impressum.html">Impressum</a>
  </nav>

  <div class="copyright">
    Â© 2025 achtung.live â€“ keine Weitergabe deiner Daten. Kein Tracking. Kein Bullshit.
  </div>
</footer>

<script>
function openModal(id) {
  document.getElementById(id).style.display = "block";
}
function closeModal(id) {
  document.getElementById(id).style.display = "none";
}

// Neuer JSON-Sende-Mechanismus und Ergebnisanzeige
document.getElementById('demoForm').addEventListener('submit', async function(event) {
  event.preventDefault();

  const text = document.getElementById('demoText').value;

  const response = await fetch('https://web-production-2e4ae.up.railway.app/analyze', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json'
    },
    body: JSON.stringify({ text: text })
  });

  if (response.ok) {
    const result = await response.json();
    showAnalysisResult(result);
  } else {
    alert('Fehler beim Senden deines Textes.');
  }
});

function showAnalysisResult(result) {
  const container = document.getElementById('analysisResult');
  container.style.display = 'block';
  container.innerHTML = `<h3>Analyse-Ergebnis:</h3><p>${result.analysis}</p>`;
}
</script>

</body>
</html>
